<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Clerk_Clerk>
            <version>4.7.0</version>
        </Clerk_Clerk>
    </modules>
    <global>
        <models>
            <clerk>
                <class>Clerk_Clerk_Model</class>
                <rewrite>
                    <product>Clerk_Clerk_Model_Catalog_Product</product>
                </rewrite>
            </clerk>
        </models>
        <helpers>
            <clerk>
                <class>Clerk_Clerk_Helper</class>
            </clerk>
        </helpers>
        <blocks>
            <clerk>
                <class>Clerk_Clerk_Block</class>
            </clerk>
        </blocks>
        <events>
            <checkout_cart_save_after>
                <observers>
                    <cart_update>
                        <class>clerk/observer</class>
                        <method>updateBasket</method>
                    </cart_update>
                </observers>
            </checkout_cart_save_after>
            <clerk_notifications_before>
                <observers>
                    <clerk_observer>
                        <type>singleton</type>
                        <class>clerk/observer</class>
                        <method>checkMessages</method>
                    </clerk_observer>
                </observers>
            </clerk_notifications_before>
            <catalog_product_save_commit_after>
                <observers>
                    <clerk_catalog_product_save_commit_after>
                        <class>clerk/observer</class>
                        <method>syncProduct</method>
                    </clerk_catalog_product_save_commit_after>
                </observers>
            </catalog_product_save_commit_after>
            <checkout_cart_add_product_complete>
                <observers>
                    <clerk_checkout_cart_add_product_complete>
                        <class>clerk/observer</class>
                        <method>itemAddedToCart</method>
                    </clerk_checkout_cart_add_product_complete>
                </observers>
            </checkout_cart_add_product_complete>
            <catalog_product_attribute_update_after>
                <observers>
                    <clerk_catalog_product_attribute_update_after>
                        <class>clerk/observer</class>
                        <method>syncProducts</method>
                    </clerk_catalog_product_attribute_update_after>
                </observers>
            </catalog_product_attribute_update_after>
            <clerkio_orderpage_format_item>
                <observers>
                    <clerk_orderpage_format_item>
                        <class>clerk/observer</class>
                        <method>formatScpOrderItem</method>
                    </clerk_orderpage_format_item>
                </observers>
            </clerkio_orderpage_format_item>
        </events>
    </global>
    <frontend>
        <layout>
            <updates>
                <clerk>
                    <file>clerk.xml</file>
                </clerk>
            </updates>
        </layout>
        <translate>
            <modules>
                <Clerk_Clerk>
                    <files>
                        <default>Clerk_Clerk.csv</default>
                    </files>
                </Clerk_Clerk>
            </modules>
        </translate>
        <routers>
            <catalogsearch>
                <use>standard</use>
                <args>
                    <modules>
                        <Clerk_Clerk before="Mage_CatalogSearch">Clerk_Clerk_CatalogSearch</Clerk_Clerk>
                    </modules>
                </args>
            </catalogsearch>
            <checkout>
                <use>standard</use>
                <args>
                    <modules>
                        <Clerk_Clerk after="Mage_Checkout">Clerk_Clerk_Checkout</Clerk_Clerk>
                    </modules>
                </args>
            </checkout>
            <clerk>
                <use>standard</use>
                <args>
                    <module>Clerk_Clerk</module>
                    <frontName>clerk</frontName>
                </args>
            </clerk>
        </routers>
        <events>
            <controller_action_layout_generate_blocks_after>
                <observers>
                    <clerk_controller_action_layout_generate_blocks_after>
                        <class>clerk/observer</class>
                        <method>layoutGenerateBlocksAfter</method>
                    </clerk_controller_action_layout_generate_blocks_after>
                </observers>
            </controller_action_layout_generate_blocks_after>
            <core_block_abstract_to_html_before>
                <observers>
                    <clerk_core_block_abstract_to_html_before>
                        <class>clerk/observer</class>
                        <method>coreBlockAbstractToHtmlBefore</method>
                    </clerk_core_block_abstract_to_html_before>
                </observers>
            </core_block_abstract_to_html_before>
        </events>
    </frontend>
    <adminhtml>
        <layout>
            <updates>
                <clerk>
                    <file>clerk.xml</file>
                </clerk>
            </updates>
        </layout>
        <events>
            <catalog_product_delete_before>
                <observers>
                    <clerk_catalog_product_delete_before>
                        <class>clerk/observer</class>
                        <method>deleteProduct</method>
                    </clerk_catalog_product_delete_before>
                </observers>
            </catalog_product_delete_before>
            <catalogrule_rule_save_after>
                <observers>
                    <clerk_catalogrule_rule_save_after>
                        <class>clerk/observer</class>
                        <method>syncOnCatalogRuleSave</method>
                    </clerk_catalogrule_rule_save_after>
                </observers>
            </catalogrule_rule_save_after>
            <clean_catalog_images_cache_after>
                <observers>
                    <clerk_clean_catalog_images_cache_after>
                        <class>clerk/observer</class>
                        <method>syncOnCleanCatalogImagesCacheAfter</method>
                    </clerk_clean_catalog_images_cache_after>
                </observers>
            </clean_catalog_images_cache_after>
              <sales_order_creditmemo_save_after>
                <observers>
                    <clerk_sales_order_creditmemo_save_after>
                        <class>clerk/observer</class>
                        <method>refundProduct</method>
                    </clerk_sales_order_creditmemo_save_after>
                </observers>
            </sales_order_creditmemo_save_after>
        </events>
        <translate>
            <modules>
                <Clerk_Clerk>
                    <files>
                        <default>Clerk_Clerk.csv</default>
                    </files>
                </Clerk_Clerk>
            </modules>
        </translate>
    </adminhtml>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <clerk after="Mage_Adminhtml">Clerk_Clerk_Adminhtml</clerk>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
    <default>
        <clerk>
            <general>
                <active>0</active>
                <collect_emails>1</collect_emails>
                <collect_subscribers>0</collect_subscribers>
                <collect_pages>1</collect_pages>
                <disable_order_synchronization>0</disable_order_synchronization>
                <include_out_of_stock_products>0</include_out_of_stock_products>
            </general>
            <search>
                <active>0</active>
                <template>search-page</template>
                <load_more_text>Load more results</load_more_text>
                <no_results_text>No results found</no_results_text>
            </search>
            <livesearch>
                <active>0</active>
                <show_categories>0</show_categories>
                <suggestions>5</suggestions>
                <categories>5</categories>
                <pages>3</pages>
                <template>live-search</template>
                <css_input_selector>#search</css_input_selector>
            </livesearch>
            <powerstep>
                <active>0</active>
                <type>popup</type>
                <templates>power-step-others-also-bought</templates>
                <exclude_duplicates_powerstep>0</exclude_duplicates_powerstep>
            </powerstep>
            <exit_intent>
                <active>0</active>
                <template>exit-intent</template>
            </exit_intent>
            <category>
                <enabled>0</enabled>
                <content>category-page-popular</content>
                <exclude_duplicates_category>0</exclude_duplicates_category>
            </category>
            <product>
                <enabled>0</enabled>
                <content>product-page-alternatives,product-page-others-also-bought</content>
                <exclude_duplicates_product>0</exclude_duplicates_product>
            </product>
            <cart>
                <enabled>0</enabled>
                <content>cart-others-also-bought</content>
                <exclude_duplicates_cart>0</exclude_duplicates_cart>
            </cart>
            <log>
                <enabled>1</enabled>
                <level>warn</level>
                <to>collect</to>
            </log>
        </clerk>
    </default>
</config>
